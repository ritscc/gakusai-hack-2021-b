test {
    useJUnitPlatform()
    jvmArgs "-javaagent:${classpath.find { it.name.contains("jmockit") }.absolutePath}"
    systemProperty "spring.profiles.active", "test"
    systemProperty "junit.jupiter.conditions.deactivate", "*"
    testLogging {
        exceptionFormat "full"
        showStandardStreams true
    }
}

// test only @IntegrationTest
task integrationTest(type: Test) {
    useJUnitPlatform {
        includeTags "IntegrationTest"
    }
    jvmArgs "-javaagent:${classpath.find { it.name.contains("jmockit") }.absolutePath}"
    systemProperty "spring.profiles.active", "test"
    systemProperty "junit.jupiter.conditions.deactivate", "*"
    testLogging {
        exceptionFormat "full"
        showStandardStreams true
    }
}

// test only @UnitTest
task unitTest(type: Test) {
    useJUnitPlatform {
        includeTags "UnitTest"
    }
    jvmArgs "-javaagent:${classpath.find { it.name.contains("jmockit") }.absolutePath}"
    systemProperty "spring.profiles.active", "test"
    systemProperty "junit.jupiter.conditions.deactivate", "*"
    testLogging {
        exceptionFormat "full"
        showStandardStreams true
    }
}
